
        <!DOCTYPE html>
        <html lang="en">
          <head>
            <meta charset="UTF-8" />
            <title>Error</title>
            <script type="module">
              const error = {"message":"Transform failed with 1 error:\n/home/pshimanshu/transform/app/routes/bulk-packing-slips.tsx:126:34: ERROR: Expected \"}\" but found \".\"","stack":"    at failureErrorWithLog (/home/pshimanshu/transform/node_modules/esbuild/lib/main.js:1467:15)\n    at /home/pshimanshu/transform/node_modules/esbuild/lib/main.js:736:50\n    at responseCallbacks.\u003ccomputed> (/home/pshimanshu/transform/node_modules/esbuild/lib/main.js:603:9)\n    at handleIncomingPacket (/home/pshimanshu/transform/node_modules/esbuild/lib/main.js:658:12)\n    at Socket.readFromStdout (/home/pshimanshu/transform/node_modules/esbuild/lib/main.js:581:7)\n    at Socket.emit (node:events:519:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at Pipe.onStreamRead (node:internal/stream_base_commons:189:23)","id":"/home/pshimanshu/transform/app/routes/bulk-packing-slips.tsx","frame":"\nExpected \"}\" but found \".\"\n124|  \n125|    \u003cdiv class=\"totals\">\n126|      \u003cp>\u003cstrong>Subtotal: ${{ order.subtotalPriceSet.shopMoney.amount }}\u003c/strong>\u003c/p>\n   |                                    ^\n127|      \u003cp>\u003cstrong>Tax: ${{ order.totalTaxSet.shopMoney.amount }}\u003c/strong>\u003c/p>\n128|    \u003c/div>\n","plugin":"vite:esbuild","pluginCode":" // app/routes/api.bulk-packing-slips.tsx\nimport { json } from \"@remix-run/node\";\nimport type { ActionFunctionArgs } from \"@remix-run/node\";\nimport { Liquid } from \"liquidjs\";\nimport puppeteer from \"puppeteer\";\nimport JSZip from \"jszip\";\n\n// ShopifyOrder interface (as before)\ninterface ShopifyOrder {\n  id: string;\n  name: string;\n  createdAt: string;\n  customer: {\n    firstName: string;\n    lastName: string;\n    email: string;\n  };\n  lineItems: {\n    edges: Array\u003c{\n      node: {\n        id: string;\n        title: string;\n        quantity: number;\n        variant: {\n          id: string;\n          sku?: string;\n          image?: { url: string };\n          product: { id: string; title: string; description?: string };\n        };\n      };\n    }>;\n  };\n  shippingAddress: {\n    address1: string;\n    city: string;\n    provinceCode: string;\n    countryCode: string;\n    zip?: string;\n  };\n  subtotalPriceSet: { shopMoney: { amount: string } };\n  totalTaxSet: { shopMoney: { amount: string } };\n  fulfillmentOrders?: {\n    edges: Array\u003c{\n      node: {\n        lineItems: {\n          edges: Array\u003c{\n            node: { id: string; totalQuantity: number; lineItem: { id: string; title: string } };\n          }>;\n        };\n      };\n    }>;\n  };\n}\n\n// Liquid Engine Setup\nconst engine = new Liquid({\n  extname: \".liquid\",\n  cache: true, // Cache templates for performance\n});\n\n// Packing Slip Liquid Template (as string; or load from file)\nconst PACKING_SLIP_TEMPLATE = `\n\u003c!DOCTYPE html>\n\u003chtml>\n\u003chead>\n  \u003cmeta charset=\"utf-8\">\n  \u003ctitle>Packing Slip - {{ order.name }}\u003c/title>\n  \u003cstyle>\n    body { font-family: Arial, sans-serif; margin: 20px; }\n    .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; }\n    .customer { margin: 10px 0; }\n    table { width: 100%; border-collapse: collapse; margin: 20px 0; }\n    th, td { border: 1px solid #000; padding: 8px; text-align: left; }\n    th { background-color: #f0f0f0; }\n    .image { width: 50px; height: auto; }\n    .totals { float: right; margin: 20px 0; }\n  \u003c/style>\n\u003c/head>\n\u003cbody>\n  \u003cdiv class=\"header\">\n    \u003ch1>Packing Slip\u003c/h1>\n    \u003cp>Order: {{ order.name }} | Date: {{ order.createdAt | date: \"%B %d, %Y\" }}\u003c/p>\n  \u003c/div>\n\n  \u003cdiv class=\"customer\">\n    \u003ch2>Ship To:\u003c/h2>\n    \u003cp>{{ order.customer.firstName }} {{ order.customer.lastName }}\u003c/p>\n    \u003cp>{{ order.shippingAddress.address1 }}\u003c/p>\n    \u003cp>{{ order.shippingAddress.city }}, {{ order.shippingAddress.provinceCode }} {{ order.shippingAddress.zip }}\u003c/p>\n    \u003cp>{{ order.shippingAddress.countryCode }}\u003c/p>\n    \u003cp>Email: {{ order.customer.email }}\u003c/p>\n  \u003c/div>\n\n  \u003ctable>\n    \u003cthead>\n      \u003ctr>\n        \u003cth>Item\u003c/th>\n        \u003cth>SKU\u003c/th>\n        \u003cth>Qty\u003c/th>\n        \u003cth>Image\u003c/th>\n      \u003c/tr>\n    \u003c/thead>\n    \u003ctbody>\n      {% for line_item in order.lineItems.edges %}\n        {% assign item = line_item.node %}\n        \u003ctr>\n          \u003ctd>\n            \u003cstrong>{{ item.variant.product.title }}\u003c/strong>\u003cbr>\n            {{ item.title }}\n          \u003c/td>\n          \u003ctd>{{ item.variant.sku | default: 'N/A' }}\u003c/td>\n          \u003ctd>{{ item.quantity }}\u003c/td>\n          \u003ctd>\n            {% if item.variant.image %}\n              \u003cimg src=\"{{ item.variant.image.url }}\" alt=\"{{ item.title }}\" class=\"image\">\n            {% else %}\n              N/A\n            {% endif %}\n          \u003c/td>\n        \u003c/tr>\n      {% endfor %}\n    \u003c/tbody>\n  \u003c/table>\n\n  \u003cdiv class=\"totals\">\n    \u003cp>\u003cstrong>Subtotal: ${{ order.subtotalPriceSet.shopMoney.amount }}\u003c/strong>\u003c/p>\n    \u003cp>\u003cstrong>Tax: ${{ order.totalTaxSet.shopMoney.amount }}\u003c/strong>\u003c/p>\n  \u003c/div>\n\n  \u003cp style=\"text-align: center; margin-top: 40px;\">Thank you for your order!\u003c/p>\n\u003c/body>\n\u003c/html>\n` as const; // 'as const' for TS literal type if needed\nexport async function action({ request }: ActionFunctionArgs) {\n  if (request.method !== \"POST\") {\n    return json({ error: \"Method not allowed\" }, { status: 405 });\n  }\n\n  try {\n    const body = await request.json();\n    const orders: ShopifyOrder[] = body.orders || []; // Fallback to empty array\n    if (!Array.isArray(orders) || orders.length === 0) {\n      return json({ error: \"No orders provided\" }, { status: 400 });\n    }\n\n    // ... (rest of the code unchanged: browser launch, loop, etc.)\n  } catch (error) {\n    console.error(\"Bulk packing slips error:\", error);\n    return json({ error: \"Failed to generate packing slips\" }, { status: 500 });\n  }\n}","loc":{"column":34,"file":"/home/pshimanshu/transform/app/routes/bulk-packing-slips.tsx","length":1,"line":126,"lineText":"    \u003cp>\u003cstrong>Subtotal: ${{ order.subtotalPriceSet.shopMoney.amount }}\u003c/strong>\u003c/p>","namespace":"","suggestion":"}"}}
              try {
                const { ErrorOverlay } = await import("/@vite/client")
                document.body.appendChild(new ErrorOverlay(error))
              } catch {
                const h = (tag, text) => {
                  const el = document.createElement(tag)
                  el.textContent = text
                  return el
                }
                document.body.appendChild(h('h1', 'Internal Server Error'))
                document.body.appendChild(h('h2', error.message))
                document.body.appendChild(h('pre', error.stack))
                document.body.appendChild(h('p', '(Error overlay failed to load)'))
              }
            </script>
          </head>
          <body>
          </body>
        </html>
      